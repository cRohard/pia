{"remainingRequest":"/home/admin_sncf/core/workspace/rgpd/pia/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/admin_sncf/core/workspace/rgpd/pia/node_modules/ngx-chips/dist/modules/components/dropdown/tag-input-dropdown.component.js","dependencies":[{"path":"/home/admin_sncf/core/workspace/rgpd/pia/node_modules/ngx-chips/dist/modules/components/dropdown/tag-input-dropdown.component.js","mtime":1511716650000},{"path":"/home/admin_sncf/core/workspace/rgpd/pia/node_modules/cache-loader/dist/cjs.js","mtime":1528983285433},{"path":"/home/admin_sncf/core/workspace/rgpd/pia/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["var __assign = (this && this.__assign) || Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n    }\n    return t;\n};\nimport { __decorate } from \"tslib\";\nimport { __metadata } from \"tslib\";\nimport { Component, ContentChildren, forwardRef, HostListener, Injector, Input, QueryList, TemplateRef, ViewChild, } from '@angular/core';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/first';\nimport 'rxjs/add/operator/debounceTime';\nimport { Ng2Dropdown } from 'ng2-material-dropdown';\nimport { OptionsProvider } from '../../core';\nimport { TagInputComponent } from '../../components';\nvar defaults = forwardRef(function () { return OptionsProvider.defaults.dropdown; });\nvar TagInputDropdown = /*@__PURE__*/ (function () {\n    function TagInputDropdown(injector) {\n        var _this = this;\n        this.injector = injector;\n        this.offset = new defaults().offset;\n        this.focusFirstElement = new defaults().focusFirstElement;\n        this.showDropdownIfEmpty = new defaults().showDropdownIfEmpty;\n        this.minimumTextLength = new defaults().minimumTextLength;\n        this.limitItemsTo = new defaults().limitItemsTo;\n        this.displayBy = new defaults().displayBy;\n        this.identifyBy = new defaults().identifyBy;\n        this.matchingFn = new defaults().matchingFn;\n        this.appendToBody = new defaults().appendToBody;\n        this.keepOpen = new defaults().keepOpen;\n        this.items = [];\n        this.tagInput = this.injector.get(TagInputComponent);\n        this._autocompleteItems = [];\n        this.show = function () {\n            var value = _this.getFormValue();\n            var hasMinimumText = value.trim().length >= _this.minimumTextLength;\n            var position = _this.calculatePosition();\n            var items = _this.getMatchingItems(value);\n            var hasItems = items.length > 0;\n            var isHidden = _this.isVisible === false;\n            var showDropdownIfEmpty = _this.showDropdownIfEmpty && hasItems && !value;\n            var assertions = [];\n            var shouldShow = isHidden && ((hasItems && hasMinimumText) || showDropdownIfEmpty);\n            var shouldHide = _this.isVisible && !hasItems;\n            if (_this.autocompleteObservable && hasMinimumText) {\n                return _this.getItemsFromObservable(value);\n            }\n            if (!_this.showDropdownIfEmpty && !value) {\n                return _this.dropdown.hide();\n            }\n            _this.setItems(items);\n            if (shouldShow) {\n                _this.dropdown.show(position);\n            }\n            else if (shouldHide) {\n                _this.hide();\n            }\n        };\n        this.requestAdding = function (item) {\n            _this.tagInput.onAddingRequested(true, _this.createTagModel(item));\n        };\n        this.resetItems = function () {\n            _this.items = [];\n        };\n        this.getItemsFromObservable = function (text) {\n            _this.setLoadingState(true);\n            var subscribeFn = function (data) {\n                _this.setLoadingState(false)\n                    .populateItems(data);\n                _this.setItems(_this.getMatchingItems(text));\n                if (_this.items.length) {\n                    _this.dropdown.show(_this.calculatePosition());\n                }\n                else if (!_this.showDropdownIfEmpty && _this.isVisible) {\n                    _this.dropdown.hide();\n                }\n            };\n            _this.autocompleteObservable(text)\n                .first()\n                .subscribe(subscribeFn, function () { return _this.setLoadingState(false); });\n        };\n    }\n    Object.defineProperty(TagInputDropdown.prototype, \"autocompleteItems\", {\n        get: function () {\n            var _this = this;\n            var items = this._autocompleteItems;\n            if (!items) {\n                return [];\n            }\n            return items.map(function (item) {\n                return typeof item === 'string' ? (_a = {},\n                    _a[_this.displayBy] = item,\n                    _a[_this.identifyBy] = item,\n                    _a) : item;\n                var _a;\n            });\n        },\n        set: function (items) {\n            this._autocompleteItems = items;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TagInputDropdown.prototype.ngOnInit = function () {\n        this.onItemClicked().subscribe(this.requestAdding);\n        this.onHide().subscribe(this.resetItems);\n        var DEBOUNCE_TIME = 200;\n        var KEEP_OPEN = this.keepOpen;\n        this.tagInput\n            .onTextChange\n            .asObservable()\n            .debounceTime(DEBOUNCE_TIME)\n            .filter(function (value) {\n            if (KEEP_OPEN === false) {\n                return value.length > 0;\n            }\n            return true;\n        })\n            .subscribe(this.show);\n    };\n    TagInputDropdown.prototype.updatePosition = function () {\n        var position = this.tagInput.inputForm.getElementPosition();\n        this.dropdown.menu.updatePosition(position);\n    };\n    Object.defineProperty(TagInputDropdown.prototype, \"isVisible\", {\n        get: function () {\n            return this.dropdown.menu.state.menuState.isVisible;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TagInputDropdown.prototype.onHide = function () {\n        return this.dropdown.onHide;\n    };\n    TagInputDropdown.prototype.onItemClicked = function () {\n        return this.dropdown.onItemClicked;\n    };\n    Object.defineProperty(TagInputDropdown.prototype, \"selectedItem\", {\n        get: function () {\n            return this.dropdown.menu.state.dropdownState.selectedItem;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TagInputDropdown.prototype, \"state\", {\n        get: function () {\n            return this.dropdown.menu.state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TagInputDropdown.prototype.hide = function () {\n        this.resetItems();\n        this.dropdown.hide();\n    };\n    TagInputDropdown.prototype.scrollListener = function () {\n        if (!this.isVisible) {\n            return;\n        }\n        this.updatePosition();\n    };\n    TagInputDropdown.prototype.onWindowBlur = function () {\n        this.dropdown.hide();\n    };\n    TagInputDropdown.prototype.getFormValue = function () {\n        return this.tagInput.formValue.trim();\n    };\n    TagInputDropdown.prototype.calculatePosition = function () {\n        return this.tagInput.inputForm.getElementPosition();\n    };\n    TagInputDropdown.prototype.createTagModel = function (item) {\n        var display = typeof item.value === 'string' ? item.value : item.value[this.displayBy];\n        var value = typeof item.value === 'string' ? item.value : item.value[this.identifyBy];\n        return __assign({}, item.value, (_a = {}, _a[this.tagInput.displayBy] = display, _a[this.tagInput.identifyBy] = value, _a));\n        var _a;\n    };\n    TagInputDropdown.prototype.getMatchingItems = function (value) {\n        var _this = this;\n        if (!value && !this.showDropdownIfEmpty) {\n            return [];\n        }\n        var dupesAllowed = this.tagInput.allowDupes;\n        return this.autocompleteItems.filter(function (item) {\n            var hasValue = dupesAllowed ? false : _this.tagInput.tags.some(function (tag) {\n                var identifyBy = _this.tagInput.identifyBy;\n                var model = typeof tag.model === 'string' ? tag.model : tag.model[identifyBy];\n                return model === item[_this.identifyBy];\n            });\n            return _this.matchingFn(value, item) && (hasValue === false);\n        });\n    };\n    TagInputDropdown.prototype.setItems = function (items) {\n        this.items = items.slice(0, this.limitItemsTo || items.length);\n    };\n    TagInputDropdown.prototype.populateItems = function (data) {\n        var _this = this;\n        this.autocompleteItems = data.map(function (item) {\n            return typeof item === 'string' ? (_a = {},\n                _a[_this.displayBy] = item,\n                _a[_this.identifyBy] = item,\n                _a) : item;\n            var _a;\n        });\n        return this;\n    };\n    TagInputDropdown.prototype.setLoadingState = function (state) {\n        this.tagInput.isLoading = state;\n        return this;\n    };\n    return TagInputDropdown;\n}());\nexport { TagInputDropdown };\n\n\n\n",{"version":3,"file":"/home/admin_sncf/core/workspace/rgpd/pia/node_modules/ngx-chips/dist/modules/components/dropdown/tag-input-dropdown.component.js.post-build-optimizer.js","sourceRoot":"","sources":["/home/admin_sncf/core/workspace/rgpd/pia/node_modules/ngx-chips/dist/modules/components/dropdown/tag-input-dropdown.component.js.pre-build-optimizer.js"],"names":[],"mappings":"AAAA,IAAI,QAAQ,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,MAAM,IAAI,UAAS,CAAC;IACjE,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QAClD,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QACjB,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC5D,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC;IACD,MAAM,CAAC,CAAC,CAAC;AACb,CAAC,CAAC;;;AAUF,OAAO,EAAE,SAAS,EAAE,eAAe,EAAE,UAAU,EAAE,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,GAAG,MAAM,eAAe,CAAC;AAC1I,OAAO,uBAAuB,CAAC;AAC/B,OAAO,0BAA0B,CAAC;AAClC,OAAO,yBAAyB,CAAC;AACjC,OAAO,gCAAgC,CAAC;AACxC,OAAO,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAC;AACpD,OAAO,EAAE,eAAe,EAAE,MAAM,YAAY,CAAC;AAC7C,OAAO,EAAE,iBAAiB,EAAE,MAAM,kBAAkB,CAAC;AACrD,IAAI,QAAQ,GAAG,UAAU,CAAC,cAAc,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACrF,IAAI,gBAAgB,iBAAG,CAAC;IACpB,0BAA0B,QAAQ;QAC9B,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,QAAQ,EAAE,CAAC,MAAM,CAAC;QACpC,IAAI,CAAC,iBAAiB,GAAG,IAAI,QAAQ,EAAE,CAAC,iBAAiB,CAAC;QAC1D,IAAI,CAAC,mBAAmB,GAAG,IAAI,QAAQ,EAAE,CAAC,mBAAmB,CAAC;QAC9D,IAAI,CAAC,iBAAiB,GAAG,IAAI,QAAQ,EAAE,CAAC,iBAAiB,CAAC;QAC1D,IAAI,CAAC,YAAY,GAAG,IAAI,QAAQ,EAAE,CAAC,YAAY,CAAC;QAChD,IAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC,SAAS,CAAC;QAC1C,IAAI,CAAC,UAAU,GAAG,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;QAC5C,IAAI,CAAC,UAAU,GAAG,IAAI,QAAQ,EAAE,CAAC,UAAU,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,IAAI,QAAQ,EAAE,CAAC,YAAY,CAAC;QAChD,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC,QAAQ,CAAC;QACxC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACrD,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,IAAI,GAAG;YACR,IAAI,KAAK,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC;YACjC,IAAI,cAAc,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC;YACpE,IAAI,QAAQ,GAAG,KAAK,CAAC,iBAAiB,EAAE,CAAC;YACzC,IAAI,KAAK,GAAG,KAAK,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;YAC1C,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;YAChC,IAAI,QAAQ,GAAG,KAAK,CAAC,SAAS,KAAK,KAAK,CAAC;YACzC,IAAI,mBAAmB,GAAG,KAAK,CAAC,mBAAmB,IAAI,QAAQ,IAAI,CAAC,KAAK,CAAC;YAC1E,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,IAAI,UAAU,GAAG,QAAQ,IAAI,CAAC,CAAC,QAAQ,IAAI,cAAc,CAAC,IAAI,mBAAmB,CAAC,CAAC;YACnF,IAAI,UAAU,GAAG,KAAK,CAAC,SAAS,IAAI,CAAC,QAAQ,CAAC;YAC9C,EAAE,CAAC,CAAC,KAAK,CAAC,sBAAsB,IAAI,cAAc,CAAC,CAAC,CAAC;gBACjD,MAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;YAC/C,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,mBAAmB,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBACvC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACjC,CAAC;YACD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACtB,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBACb,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAClC,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClB,KAAK,CAAC,IAAI,EAAE,CAAC;YACjB,CAAC;QACL,CAAC,CAAC;QACF,IAAI,CAAC,aAAa,GAAG,UAAU,IAAI;YAC/B,KAAK,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,EAAE,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QACvE,CAAC,CAAC;QACF,IAAI,CAAC,UAAU,GAAG;YACd,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;QACrB,CAAC,CAAC;QACF,IAAI,CAAC,sBAAsB,GAAG,UAAU,IAAI;YACxC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YAC5B,IAAI,WAAW,GAAG,UAAU,IAAI;gBAC5B,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC;qBACvB,aAAa,CAAC,IAAI,CAAC,CAAC;gBACzB,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC7C,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;oBACrB,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;gBACnD,CAAC;gBACD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,mBAAmB,IAAI,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;oBACrD,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;gBAC1B,CAAC;YACL,CAAC,CAAC;YACF,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC;iBAC7B,KAAK,EAAE;iBACP,SAAS,CAAC,WAAW,EAAE,cAAc,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtF,CAAC,CAAC;IACN,CAAC;IACD,MAAM,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,EAAE,mBAAmB,EAAE;QACnE,GAAG,EAAE;YACD,IAAI,KAAK,GAAG,IAAI,CAAC;YACjB,IAAI,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC;YACpC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACT,MAAM,CAAC,EAAE,CAAC;YACd,CAAC;YACD,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,IAAI;gBAC3B,MAAM,CAAC,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE;oBACtC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,IAAI;oBAC1B,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,IAAI;oBAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBACf,IAAI,EAAE,CAAC;YACX,CAAC,CAAC,CAAC;QACP,CAAC;QACD,GAAG,EAAE,UAAU,KAAK;YAChB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QACpC,CAAC;QACD,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,IAAI;KACrB,CAAC,CAAC;IACH,gBAAgB,CAAC,SAAS,CAAC,QAAQ,GAAG;QAClC,IAAI,CAAC,aAAa,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACnD,IAAI,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACzC,IAAI,aAAa,GAAG,GAAG,CAAC;QACxB,IAAI,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC9B,IAAI,CAAC,QAAQ;aACR,YAAY;aACZ,YAAY,EAAE;aACd,YAAY,CAAC,aAAa,CAAC;aAC3B,MAAM,CAAC,UAAU,KAAK;YACvB,EAAE,CAAC,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;YAC5B,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC;aACG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,cAAc,GAAG;QACxC,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC;QAC5D,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAChD,CAAC,CAAC;IACF,MAAM,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,EAAE,WAAW,EAAE;QAC3D,GAAG,EAAE;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC;QACxD,CAAC;QACD,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,IAAI;KACrB,CAAC,CAAC;IACH,gBAAgB,CAAC,SAAS,CAAC,MAAM,GAAG;QAChC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;IAChC,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,aAAa,GAAG;QACvC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;IACvC,CAAC,CAAC;IACF,MAAM,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAc,EAAE;QAC9D,GAAG,EAAE;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,YAAY,CAAC;QAC/D,CAAC;QACD,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,IAAI;KACrB,CAAC,CAAC;IACH,MAAM,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,EAAE;QACvD,GAAG,EAAE;YACD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;QACpC,CAAC;QACD,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,IAAI;KACrB,CAAC,CAAC;IACH,gBAAgB,CAAC,SAAS,CAAC,IAAI,GAAG;QAC9B,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACzB,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,cAAc,GAAG;QACxC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAClB,MAAM,CAAC;QACX,CAAC;QACD,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,YAAY,GAAG;QACtC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACzB,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,YAAY,GAAG;QACtC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IAC1C,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,iBAAiB,GAAG;QAC3C,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC;IACxD,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,cAAc,GAAG,UAAU,IAAI;QACtD,IAAI,OAAO,GAAG,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACvF,IAAI,KAAK,GAAG,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACtF,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;QAC5H,IAAI,EAAE,CAAC;IACX,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,KAAK;QACzD,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,EAAE,CAAC;QACd,CAAC;QACD,IAAI,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC;QAC5C,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,UAAU,IAAI;YAC/C,IAAI,QAAQ,GAAG,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG;gBACxE,IAAI,UAAU,GAAG,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC;gBAC3C,IAAI,KAAK,GAAG,OAAO,GAAG,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;gBAC9E,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;YACH,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;IACP,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,QAAQ,GAAG,UAAU,KAAK;QACjD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;IACnE,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,aAAa,GAAG,UAAU,IAAI;QACrD,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,IAAI;YAC5C,MAAM,CAAC,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE;gBACtC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,IAAI;gBAC1B,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,IAAI;gBAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACf,IAAI,EAAE,CAAC;QACX,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC;IACF,gBAAgB,CAAC,SAAS,CAAC,eAAe,GAAG,UAAU,KAAK;QACxD,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;QAChC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC;IACF,MAAM,CAAC,gBAAgB,CAAC;GACzB,CAAC,CAAC;AA6EL,OAAO,EAAE,gBAAgB,EAAE,CAAC;AAC5B,wDAAwD","sourcesContent":["var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Component, ContentChildren, forwardRef, HostListener, Injector, Input, QueryList, TemplateRef, ViewChild, } from '@angular/core';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/first';\nimport 'rxjs/add/operator/debounceTime';\nimport { Ng2Dropdown } from 'ng2-material-dropdown';\nimport { OptionsProvider } from '../../core';\nimport { TagInputComponent } from '../../components';\nvar defaults = forwardRef(function () { return OptionsProvider.defaults.dropdown; });\nvar TagInputDropdown = (function () {\n    function TagInputDropdown(injector) {\n        var _this = this;\n        this.injector = injector;\n        this.offset = new defaults().offset;\n        this.focusFirstElement = new defaults().focusFirstElement;\n        this.showDropdownIfEmpty = new defaults().showDropdownIfEmpty;\n        this.minimumTextLength = new defaults().minimumTextLength;\n        this.limitItemsTo = new defaults().limitItemsTo;\n        this.displayBy = new defaults().displayBy;\n        this.identifyBy = new defaults().identifyBy;\n        this.matchingFn = new defaults().matchingFn;\n        this.appendToBody = new defaults().appendToBody;\n        this.keepOpen = new defaults().keepOpen;\n        this.items = [];\n        this.tagInput = this.injector.get(TagInputComponent);\n        this._autocompleteItems = [];\n        this.show = function () {\n            var value = _this.getFormValue();\n            var hasMinimumText = value.trim().length >= _this.minimumTextLength;\n            var position = _this.calculatePosition();\n            var items = _this.getMatchingItems(value);\n            var hasItems = items.length > 0;\n            var isHidden = _this.isVisible === false;\n            var showDropdownIfEmpty = _this.showDropdownIfEmpty && hasItems && !value;\n            var assertions = [];\n            var shouldShow = isHidden && ((hasItems && hasMinimumText) || showDropdownIfEmpty);\n            var shouldHide = _this.isVisible && !hasItems;\n            if (_this.autocompleteObservable && hasMinimumText) {\n                return _this.getItemsFromObservable(value);\n            }\n            if (!_this.showDropdownIfEmpty && !value) {\n                return _this.dropdown.hide();\n            }\n            _this.setItems(items);\n            if (shouldShow) {\n                _this.dropdown.show(position);\n            }\n            else if (shouldHide) {\n                _this.hide();\n            }\n        };\n        this.requestAdding = function (item) {\n            _this.tagInput.onAddingRequested(true, _this.createTagModel(item));\n        };\n        this.resetItems = function () {\n            _this.items = [];\n        };\n        this.getItemsFromObservable = function (text) {\n            _this.setLoadingState(true);\n            var subscribeFn = function (data) {\n                _this.setLoadingState(false)\n                    .populateItems(data);\n                _this.setItems(_this.getMatchingItems(text));\n                if (_this.items.length) {\n                    _this.dropdown.show(_this.calculatePosition());\n                }\n                else if (!_this.showDropdownIfEmpty && _this.isVisible) {\n                    _this.dropdown.hide();\n                }\n            };\n            _this.autocompleteObservable(text)\n                .first()\n                .subscribe(subscribeFn, function () { return _this.setLoadingState(false); });\n        };\n    }\n    Object.defineProperty(TagInputDropdown.prototype, \"autocompleteItems\", {\n        get: function () {\n            var _this = this;\n            var items = this._autocompleteItems;\n            if (!items) {\n                return [];\n            }\n            return items.map(function (item) {\n                return typeof item === 'string' ? (_a = {},\n                    _a[_this.displayBy] = item,\n                    _a[_this.identifyBy] = item,\n                    _a) : item;\n                var _a;\n            });\n        },\n        set: function (items) {\n            this._autocompleteItems = items;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TagInputDropdown.prototype.ngOnInit = function () {\n        this.onItemClicked().subscribe(this.requestAdding);\n        this.onHide().subscribe(this.resetItems);\n        var DEBOUNCE_TIME = 200;\n        var KEEP_OPEN = this.keepOpen;\n        this.tagInput\n            .onTextChange\n            .asObservable()\n            .debounceTime(DEBOUNCE_TIME)\n            .filter(function (value) {\n            if (KEEP_OPEN === false) {\n                return value.length > 0;\n            }\n            return true;\n        })\n            .subscribe(this.show);\n    };\n    TagInputDropdown.prototype.updatePosition = function () {\n        var position = this.tagInput.inputForm.getElementPosition();\n        this.dropdown.menu.updatePosition(position);\n    };\n    Object.defineProperty(TagInputDropdown.prototype, \"isVisible\", {\n        get: function () {\n            return this.dropdown.menu.state.menuState.isVisible;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TagInputDropdown.prototype.onHide = function () {\n        return this.dropdown.onHide;\n    };\n    TagInputDropdown.prototype.onItemClicked = function () {\n        return this.dropdown.onItemClicked;\n    };\n    Object.defineProperty(TagInputDropdown.prototype, \"selectedItem\", {\n        get: function () {\n            return this.dropdown.menu.state.dropdownState.selectedItem;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TagInputDropdown.prototype, \"state\", {\n        get: function () {\n            return this.dropdown.menu.state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TagInputDropdown.prototype.hide = function () {\n        this.resetItems();\n        this.dropdown.hide();\n    };\n    TagInputDropdown.prototype.scrollListener = function () {\n        if (!this.isVisible) {\n            return;\n        }\n        this.updatePosition();\n    };\n    TagInputDropdown.prototype.onWindowBlur = function () {\n        this.dropdown.hide();\n    };\n    TagInputDropdown.prototype.getFormValue = function () {\n        return this.tagInput.formValue.trim();\n    };\n    TagInputDropdown.prototype.calculatePosition = function () {\n        return this.tagInput.inputForm.getElementPosition();\n    };\n    TagInputDropdown.prototype.createTagModel = function (item) {\n        var display = typeof item.value === 'string' ? item.value : item.value[this.displayBy];\n        var value = typeof item.value === 'string' ? item.value : item.value[this.identifyBy];\n        return __assign({}, item.value, (_a = {}, _a[this.tagInput.displayBy] = display, _a[this.tagInput.identifyBy] = value, _a));\n        var _a;\n    };\n    TagInputDropdown.prototype.getMatchingItems = function (value) {\n        var _this = this;\n        if (!value && !this.showDropdownIfEmpty) {\n            return [];\n        }\n        var dupesAllowed = this.tagInput.allowDupes;\n        return this.autocompleteItems.filter(function (item) {\n            var hasValue = dupesAllowed ? false : _this.tagInput.tags.some(function (tag) {\n                var identifyBy = _this.tagInput.identifyBy;\n                var model = typeof tag.model === 'string' ? tag.model : tag.model[identifyBy];\n                return model === item[_this.identifyBy];\n            });\n            return _this.matchingFn(value, item) && (hasValue === false);\n        });\n    };\n    TagInputDropdown.prototype.setItems = function (items) {\n        this.items = items.slice(0, this.limitItemsTo || items.length);\n    };\n    TagInputDropdown.prototype.populateItems = function (data) {\n        var _this = this;\n        this.autocompleteItems = data.map(function (item) {\n            return typeof item === 'string' ? (_a = {},\n                _a[_this.displayBy] = item,\n                _a[_this.identifyBy] = item,\n                _a) : item;\n            var _a;\n        });\n        return this;\n    };\n    TagInputDropdown.prototype.setLoadingState = function (state) {\n        this.tagInput.isLoading = state;\n        return this;\n    };\n    return TagInputDropdown;\n}());\n__decorate([\n    ViewChild(Ng2Dropdown),\n    __metadata(\"design:type\", Ng2Dropdown)\n], TagInputDropdown.prototype, \"dropdown\", void 0);\n__decorate([\n    ContentChildren(TemplateRef),\n    __metadata(\"design:type\", QueryList)\n], TagInputDropdown.prototype, \"templates\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], TagInputDropdown.prototype, \"offset\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"focusFirstElement\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"showDropdownIfEmpty\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Function)\n], TagInputDropdown.prototype, \"autocompleteObservable\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"minimumTextLength\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], TagInputDropdown.prototype, \"limitItemsTo\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"displayBy\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"identifyBy\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Function)\n], TagInputDropdown.prototype, \"matchingFn\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"appendToBody\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], TagInputDropdown.prototype, \"keepOpen\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Array),\n    __metadata(\"design:paramtypes\", [Array])\n], TagInputDropdown.prototype, \"autocompleteItems\", null);\n__decorate([\n    HostListener('window:scroll'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], TagInputDropdown.prototype, \"scrollListener\", null);\n__decorate([\n    HostListener('window:blur'),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", []),\n    __metadata(\"design:returntype\", void 0)\n], TagInputDropdown.prototype, \"onWindowBlur\", null);\nTagInputDropdown = __decorate([\n    Component({\n        selector: 'tag-input-dropdown',\n        templateUrl: './tag-input-dropdown.template.html'\n    }),\n    __metadata(\"design:paramtypes\", [Injector])\n], TagInputDropdown);\nexport { TagInputDropdown };\n//# sourceMappingURL=tag-input-dropdown.component.js.map"]}]}